{% load static %}
{% include 'includes/topbar.html' %}



        <div class="breadcrumbs">
            <div class="col-sm-4">
                <div class="page-header float-left">
                    <div class="page-title">
                        <h1>Staff</h1>
                    </div>
                </div>
            </div>
            <div class="col-sm-8">
                <div class="page-header float-right">
                    <div class="page-title">
                        <ol class="breadcrumb text-right">
                            <li><a href="#">Rooms Management</a></li>
                            {% comment %} <li><a href="#"></a></li> {% endcomment %}
                            <li class="active">Rooms</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="content mt-3">
            <div class="animated fadeIn">
                <div class="row">

                    <div class="col-md-12">
                        <div class="card">
                      
                            <div class="card-header">
                                <strong class="card-title">Staffs</strong>
                                <button type="button" class="btn btn-secondary mb-1 float-right" data-toggle="modal" data-target="#mediumModalz" >
                                    Add Expenses
                                </button> 
                            </div>
                          
                            
                            
                           
                       
                            <div class="card-body">
                                <table id="bootstrap-data-table-export" class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Income</th>
                                            <th>Expenses</th>
                                            <th>Total</th>
                                            
                                             {% comment %} <th>Status</th> {% endcomment %}
                                           
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                   
                                        {% for expense in ex %}
                                        <tr>

                                            <td>{{expense.date|date:"Y-m-d"}}</td>
                                            {% comment %} <td>{{rooms.item}}</td> {% endcomment %}
                                           
                                             <td>
                                             {% for item in expense.item %}
                                                    {{item}}<br> 
                                             {% endfor %}
                                             </td>
                                             
                                            <td>
                                            {% for item in expense.amount %}
                                                    {{item}}<br>
                                             {% endfor %}
                                            </td>
                                            
                                           <td>
                                           {{expense.total}}
                                           </td>
                                            
                                            {% comment %} {% if rooms.profit < 0 %}
                                             <td style="color:red">
                                             LOSS
                                             </td>
                                            
                                         {% else %}
                                             <td style="color:green">
                                             PROFIT
                                             </td>
                                          {% endif %} {% endcomment %}
                                            <td>
                                                {% comment %} <button type="button" class="btn btn-primary mb-1 float-right" data-toggle="modal" data-target="#smallmodalz{{rooms.id}}" >
                                                    <i class="fa fa-key"></i>
                                                </button>
                                                {% if user.is_active == True %}
                                                <button type="button" class="btn btn-success mb-1 float-right" data-toggle="modal" data-target="#smallmodals{{rooms.id}}" >
                                                    <i class="fa fa-lock"></i>
                                                </button> 
                                                {% else %}
                                                <button type="button" class="btn btn-warning mb-1 float-right" data-toggle="modal" data-target="#smallmodals{{rooms.id}}" >
                                                    <i class="fa fa-unlock"></i>
                                                </button> 
                                                {% endif %} {% endcomment %}
                                                
                                                <button type="button" class="btn btn-danger mb-1 float-right" data-toggle="modal" data-target="#smallmodal{{expense.date|date:"Y-m-d"}}" >
                                                    <i class="fa fa-trash"></i>
                                                </button> 
                                                {% comment %} <button type="button" class="btn btn-secondary mb-1 float-right" data-toggle="modal" data-target="#mediumModals{{rooms.id}}" >
                                                    <i class="fa fa-pencil"></i>
                                                </button> {% endcomment %}
                                                
                                                
                                            </td>
                                            

                                        </tr>
                                        

                                        {% endfor %}
                                        {% comment %} <tr>
                                        <td colspan="4" style="text-align:center; color:red">UnAvailable</td>
                                         </tr> {% endcomment %}
                                         {% comment %} {% for rooms in bil %} {% endcomment %}
                                         {% comment %} <tr>
                                        
                                        <td>{{rooms.reservation.room.number}}</td>
                                        <td>{{rooms.reservation.room.category.Name}}</td>
                                            
                                            
                                       
                                            <td>{{rooms.total_remain}}</td>
                                           
                                            
                                   
                                    
                                            <td>
                                                <button type="button" class="btn btn-primary mb-1 float-right" data-toggle="modal" data-target="#smallmodalz{{rooms.id}}" >
                                                    <i class="fa fa-key"></i>
                                                </button>
                                                {% if user.is_active == True %}
                                                <button type="button" class="btn btn-success mb-1 float-right" data-toggle="modal" data-target="#smallmodals{{rooms.id}}" >
                                                    <i class="fa fa-lock"></i>
                                                </button> 
                                                {% else %}
                                                <button type="button" class="btn btn-warning mb-1 float-right" data-toggle="modal" data-target="#smallmodals{{rooms.id}}" >
                                                    <i class="fa fa-unlock"></i>
                                                </button> 
                                                {% endif %}
                                                
                                                <button type="button" class="btn btn-danger mb-1 float-right" data-toggle="modal" data-target="#smallmodal{{rooms.id}}" >
                                                    <i class="fa fa-trash"></i>
                                                </button> 
                                                <button type="button" class="btn btn-secondary mb-1 float-right" data-toggle="modal" data-target="#mediumModals{{rooms.id}}" >
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                                
                                                
                                            </td>
                                        </tr> {% endcomment %}
                                        {% comment %} {% endfor %} {% endcomment %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>


                </div>
            </div><!-- .animated -->
        </div><!-- .content -->

        {% for expense in ex %}
<div class="modal fade" id="mediumModals{{expense.id}}" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="mediumModalLabel">Edit User</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row form-group">
                                    <form method='POST' action='/uaa/edituser/{{user.id}}'>
                                        {% csrf_token %}
                                    {% comment %} <div class="col col-md-3"><label for="email-input" class=" form-control-label">Email Input</label></div> {% endcomment %}
                                    <div class="col-12 col-md-3"><input type="text" id="text-input" name="name" placeholder="Staff Name" class="form-control" value="{{user.first_name}}" required><small class="help-block form-text">Please enter Staff Name</small></div>

                                    <div class="col-12 col-md-3"><input type="phone" id="text-input" name="phone" placeholder="Enter Phone Number" value={{user.last_name}} class="form-control"><small class="help-block form-text">Please enter Staff Phone Number</small></div>

                                    <div class="col-12 col-md-3"><input type="email" id="email-input" name="email" placeholder="Enter Email" value="{{user.email}}" class="form-control"><small class="help-block form-text">Please enter Staff Email Number</small></div>

                                    <div class="col-12 col-md-3"><input type="text" id="email-input" name="username" placeholder="Enter username" value="{{user.username}}" class="form-control"><small class="help-block form-text">Please enter Staff username</small></div>
                                    
                                </div>
                                <div class="col-12 col-md-12">
                                    
                                <select name="group" id="select" class="form-control">
                                    {% for g in g %}

                                    <option value="{{g.id}}">{{g.name}}</option>
                                 
                                    {% endfor %}
                                </select>
                                <small class="help-block form-text">Add Position</small>
                            </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary">Confirm</button>
                            </div>
                        </div>
                    </div>
                </form>
                </div>




                <div class="modal fade" id="mediumModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="mediumModalLabel">Add Expenses</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row form-group">
                                    <form method='POST' action='/admins/deleteExpenses/'>
                                        {% csrf_token %}
                                    {% comment %} <div class="col col-md-3"><label for="email-input" class=" form-control-label">Email Input</label></div> {% endcomment %}
                                    <div class="col-12 col-md-4"><input type="text" id="text-input" name="name" placeholder="Staff Name" class="form-control" required><small class="help-block form-text">Please enter Staff Name</small></div>

                                    <div class="col-12 col-md-4"><input type="phone" id="text-input" name="phone" placeholder="Enter Phone Number" class="form-control"><small class="help-block form-text">Please enter Staff Phone Number</small></div>

                                    <div class="col-12 col-md-4"><input type="email" id="email-input" name="email" placeholder="Enter Email" class="form-control"><small class="help-block form-text">Please enter Staff Email Number</small></div>
                                    
                                </div>
                                <div class="col-12 col-md-12">
                                    
                                <select name="group" id="select" class="form-control">
                                    {% for g in g %}

                                    <option value="{{g.id}}">{{g.name}}</option>
                                 
                                    {% endfor %}
                                </select>
                                <small class="help-block form-text">Add Position</small>
                            </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary">Confirm</button>
                            </div>
                        </div>
                    </div>
                </form>
                </div>



                <div class="modal fade" id="smallmodal{{expense.date| date:"Y-m-d"}}" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-sm" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="smallmodalLabel">Delete Expenses</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p>
                                    Are you Sure YOu want to Delete the Records
                                </p>
                            </div>
                            <form action="/admins/deleteExpenses/{{expense.date|date:"Y-m-d"}}" method='POST'>
                                {% csrf_token %}
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </div>
                        </form>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="smallmodals{{user.id}}" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-sm" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="smallmodalLabel">Block Staff</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            {% if user.is_active == True %}
                            <div class="modal-body">
                                <p>
                                    Are you Sure YOu want to Block {{user.first_name}}
                                </p>
                            </div>
                            
                            <form action="/uaa/blockuser/{{user.id}}">
                                {% csrf_token %}
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-danger">Block</button>
                            </div>
                        </form>
                        {% else %}
                        <div class="modal-body">
                            <p>
                                Are you Sure You want to UnBlock {{user.first_name}}
                            </p>
                        </div>
                        <form action="/uaa/unblockuser/{{user.id}}">
                            {% csrf_token %}
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-danger">UnBlock</button>
                        </div>
                    </form>
                        {% endif %}
                        </div>
                    </div>
                </div>


                



                <div class="modal fade" id="smallmodalz{{user.id}}" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-sm" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="smallmodalLabel">Delete Expenses</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p>
                                    Are you Sure Reset Password for {{user.first_name}}
                                </p>
                            </div>
                            <form action="/uaa/reset_password/{{user.id}}">
                                {% csrf_token %}
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-danger">reset</button>
                            </div>
                        </form>
                        </div>
                    </div>
                </div>

                {% endfor %}
          <div class="modal fade" id="mediumModalz" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="mediumModalLabel">Add User</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                
                                    <form method='POST' action='/admins/addExpense'>
                                        {% csrf_token %}
                                    {% comment %} <div class="col col-md-3"><label for="email-input" class=" form-control-label">Email Input</label></div> {% endcomment %}
                                    <div class="col-12 col-md-6"><input type="text" id="text-input" name="name" placeholder="Item Name" class="form-control" required><small class="help-block form-text">Please enter Item Name</small></div>

                                    <div class="col-12 col-md-6"><input type="number" min="0" value="0" id="text-input" name="price" placeholder="Enter Price" class="form-control" required><small class="help-block form-text">Please enter Price</small></div>
<div class="col-12 col-md-6" id="additional-fields">
            <!-- Additional input fields will be added here dynamically -->
        </div>
        <div class="col-12 col-md-6" id="additional-field">
            <!-- Additional input fields will be added here dynamically -->
        </div>
                               

                                        <button type="button" class="btn btn-secondary" id="add-field-button"><i class="fa fa-plus"></i></button>
                                    
                        
                                {% comment %} <div class="col-12 col-md-12">
                                    
                                <select name="group" id="select" class="form-control">
                                    

                                    
                                 
                                    
                                </select>
                                <small class="help-block form-text">Add Position</small>
                            </div> {% endcomment %}
                            
                            <div class="modal-footer">
                             
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary" id="submit-form-button">Confirm</button>
                            </div>
                        </div>
                    </div>
                </form>
                </div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        var addButton = $("#add-field-button");
        var fieldsContainer = $("#additional-fields");
        var fieldsContainers = $("#additional-field");

        addButton.click(function() {
            var newField = '<input type="text" id="text-input" name="name" placeholder="Item Name" class="form-control" required><small class="help-block form-text">Please enter Item Name</small>';
            var newFields = '<input type="number" min="0" value="0" id="text-input" name="price" placeholder="Enter Price" class="form-control" required><small class="help-block form-text">Please enter Price</small>';
            fieldsContainer.append(newField);
            fieldsContainers.append(newFields);
        });
    });
</script>
    </div><!-- /#right-panel -->
{% include 'includes/footers.html'%}
